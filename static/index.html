<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LeaseLens — Know What You're Signing</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300..700;1,9..40,300..700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ── TOKENS ── */
:root {
  --bg:           #FAFAF8;
  --surface:      #FFFFFF;
  --surface-2:    #F4F4F0;
  --border:       #E4E4DC;
  --border-light: #D4D4C8;
  --accent:       #6366F1;
  --accent-h:     #4F46E5;
  --accent-glow:  rgba(99,102,241,0.12);
  --text:         #1A1A18;
  --text-2:       #4A4A44;
  --text-3:       #8A8A80;
  --success:      #10B981;
  --warning:      #F59E0B;
  --danger:       #EF4444;
  --success-bg:   rgba(16,185,129,0.08);
  --warning-bg:   rgba(245,158,11,0.08);
  --danger-bg:    rgba(239,68,68,0.08);
  --r:  12px;
  --r2:  8px;
  --r3:  6px;
  --shadow: 0 0 0 1px var(--border), 0 4px 24px rgba(0,0,0,0.4);
  --tr: all 0.18s cubic-bezier(0.4,0,0.2,1);
}

/* ── RESET ── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
button{cursor:pointer;font-family:inherit;border:none;outline:none;background:none}
input,select{font-family:inherit}

/* ── PAGE SYSTEM ── */
.page{display:none;min-height:100vh}
.page.active{display:block}
#page-upload.active{display:flex;align-items:center;justify-content:center;padding:40px 20px}

/* ── NAV ── */
nav {
  position:fixed;top:0;left:0;right:0;z-index:200;
  height:64px;padding:0 40px;
  display:flex;align-items:center;justify-content:space-between;
  background:rgba(250,250,248,0.9);
  backdrop-filter:blur(16px);
  border-bottom:1px solid transparent;
  transition:border-color 0.2s;
}
nav.scrolled{border-bottom-color:var(--border);box-shadow:0 1px 8px rgba(0,0,0,0.06)}
.logo{display:flex;align-items:center;gap:9px;font-size:17px;font-weight:600;letter-spacing:-0.3px;cursor:pointer}
.logo-mark{
  width:28px;height:28px;border-radius:8px;background:var(--accent);
  display:flex;align-items:center;justify-content:center;flex-shrink:0
}
.nav-r{display:flex;align-items:center;gap:10px}
.btn-ghost{padding:8px 16px;border-radius:var(--r2);font-size:14px;font-weight:500;color:var(--text-2);border:1px solid transparent;transition:var(--tr)}
.btn-ghost:hover{color:var(--text);border-color:var(--border-light);background:var(--surface)}
.btn-nav{padding:9px 18px;border-radius:var(--r2);font-size:14px;font-weight:600;color:#fff;background:var(--accent);transition:var(--tr)}
.btn-nav:hover{background:var(--accent-h);transform:translateY(-1px);box-shadow:0 4px 12px rgba(99,102,241,0.3)}

/* ── HERO ── */
.hero{
  padding:152px 40px 96px;
  text-align:center;
  position:relative;overflow:hidden;
}
.hero::before{
  content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:900px;height:500px;
  background:radial-gradient(ellipse at center top,rgba(99,102,241,0.06) 0%,transparent 65%);
  pointer-events:none;
}
.eyebrow{
  display:inline-flex;align-items:center;gap:8px;
  padding:5px 14px;border-radius:100px;
  border:1px solid var(--border-light);background:var(--surface);
  font-size:13px;font-weight:500;color:var(--text-2);margin-bottom:28px;
  animation:fadeUp 0.5s ease both;
}
.dot{width:6px;height:6px;border-radius:50%;background:var(--success);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.5;transform:scale(1.5)}}

h1{
  font-size:clamp(40px,6vw,64px);font-weight:700;line-height:1.12;letter-spacing:-1.5px;
  margin:0 auto 20px;max-width:720px;
  animation:fadeUp 0.5s 0.08s ease both;
}
.hero-sub{
  font-size:20px;color:var(--text-2);line-height:1.6;
  max-width:520px;margin:0 auto 36px;
  animation:fadeUp 0.5s 0.16s ease both;
}
.hero-ctas{
  display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:36px;
  animation:fadeUp 0.5s 0.24s ease both;
}
.btn-hero{
  padding:13px 26px;border-radius:var(--r2);font-size:15px;font-weight:600;color:#fff;
  background:var(--accent);transition:var(--tr);
  box-shadow:0 0 0 1px rgba(99,102,241,0.5),0 4px 16px rgba(99,102,241,0.2);
}
.btn-hero:hover{background:var(--accent-h);transform:translateY(-2px);box-shadow:0 0 0 1px rgba(99,102,241,0.6),0 8px 24px rgba(99,102,241,0.3)}
.btn-hero-ghost{
  padding:13px 26px;border-radius:var(--r2);font-size:15px;font-weight:500;color:var(--text-2);
  background:var(--surface);border:1px solid var(--border-light);transition:var(--tr);
}
.btn-hero-ghost:hover{color:var(--text);background:var(--surface-2)}
.trust-sigs{
  display:flex;align-items:center;justify-content:center;gap:24px;flex-wrap:wrap;
  animation:fadeUp 0.5s 0.32s ease both;
}
.tsig{display:flex;align-items:center;gap:7px;font-size:13px;color:var(--text-3);font-weight:500}
.tsig svg{color:var(--success);flex-shrink:0}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

/* ── HOW IT WORKS ── */
.hiw-header{text-align:center;margin-bottom:64px}
.steps{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;max-width:1040px;margin:0 auto;background:var(--border);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.step{
  padding:36px 32px;background:var(--surface);
  transition:var(--tr);
}
.step:hover{background:var(--surface-2)}
.step-meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}
.step-n{font-size:13px;font-weight:700;color:var(--text-3);letter-spacing:0.5px;font-family:'DM Sans',monospace}
.step-tag{font-size:11px;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:1px;padding:3px 8px;border-radius:4px;background:var(--accent-glow);border:1px solid rgba(99,102,241,0.15)}
.step h3{font-size:17px;font-weight:700;line-height:1.3;letter-spacing:-0.2px;margin-bottom:12px;color:var(--text)}
.step p{font-size:14px;color:var(--text-2);line-height:1.7;margin-bottom:16px}
.step-detail{font-size:12px;color:var(--text-3);line-height:1.5;padding-top:14px;border-top:1px solid var(--border);font-style:italic}

/* ── PREVIEW CARD ── */
.preview-section{padding:96px 40px;background:linear-gradient(180deg,var(--bg) 0%,var(--surface) 50%,var(--bg) 100%)}
.preview-inner{max-width:440px;margin:0 auto}
.risk-card{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--r);overflow:hidden;box-shadow:var(--shadow)}
.risk-hdr{padding:22px 24px 18px;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;justify-content:space-between}
.risk-lbl{font-size:11px;font-weight:600;color:var(--text-3);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
.risk-num{font-size:48px;font-weight:700;line-height:1;color:var(--danger)}
.risk-denom{font-size:18px;color:var(--text-3);font-weight:400}
.risk-badge{padding:5px 12px;border-radius:100px;font-size:11px;font-weight:600;background:var(--danger-bg);color:var(--danger);border:1px solid rgba(239,68,68,0.2);white-space:nowrap}
.flag-list{padding:4px 0}
.flag-row{display:flex;align-items:center;gap:12px;padding:12px 24px;border-bottom:1px solid var(--border);transition:var(--tr)}
.flag-row:hover{background:rgba(255,255,255,0.02)}
.flag-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.flag-dot.h{background:var(--danger);box-shadow:0 0 6px rgba(239,68,68,0.5)}
.flag-dot.m{background:var(--warning);box-shadow:0 0 6px rgba(245,158,11,0.5)}
.flag-dot.l{background:var(--success);box-shadow:0 0 6px rgba(16,185,129,0.5)}
.flag-info{}
.flag-name{font-size:13px;font-weight:600;color:var(--text);margin-bottom:2px}
.flag-desc{font-size:12px;color:var(--text-2)}
.flag-pill{
  flex-shrink:0;margin-left:auto;padding:3px 9px;border-radius:100px;
  font-size:10px;font-weight:700;letter-spacing:0.3px;
}
.flag-pill.h{background:var(--danger-bg);color:var(--danger)}
.flag-pill.m{background:var(--warning-bg);color:var(--warning)}
.flag-pill.l{background:var(--success-bg);color:var(--success)}

.flag-locked{position:relative;padding:12px 24px}
.flag-locked-blur{filter:blur(3px);pointer-events:none;opacity:0.35}
.flag-locked-overlay{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;gap:8px;
  background:rgba(10,10,15,0.7);backdrop-filter:blur(2px);
  font-size:12px;color:var(--text-2);padding:0 24px;
}

.card-cta{padding:18px 24px;border-top:1px solid var(--border);display:flex;flex-direction:column;align-items:center;gap:9px}
.btn-unlock{
  width:100%;padding:11px;background:var(--accent);color:#fff;border-radius:var(--r2);
  font-size:14px;font-weight:600;transition:var(--tr);
  /* REPLACE WITH STRIPE LINK */
}
.btn-unlock:hover{background:var(--accent-h)}
.cta-note{font-size:11px;color:var(--text-3);display:flex;align-items:center;gap:5px}

/* ── PRICING ── */
.pricing-section{padding:96px 40px}
.pricing-card{
  max-width:460px;margin:0 auto;
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r);
  padding:40px;box-shadow:var(--shadow);position:relative;overflow:hidden;
}
.pricing-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--accent),transparent);
}
.price-big{font-size:60px;font-weight:700;line-height:1;letter-spacing:-2px;margin-bottom:4px}
.price-per{font-size:14px;color:var(--text-3);margin-bottom:28px}
.price-list{list-style:none;margin-bottom:28px}
.price-list li{display:flex;align-items:center;gap:10px;padding:9px 0;font-size:14px;color:var(--text-2);border-bottom:1px solid var(--border)}
.price-list li:last-child{border-bottom:none}
.price-list svg{color:var(--success);flex-shrink:0}
.btn-pricing{
  width:100%;padding:13px;background:var(--accent);color:#fff;border-radius:var(--r2);
  font-size:15px;font-weight:600;transition:var(--tr);margin-bottom:12px;
  box-shadow:0 0 0 1px rgba(99,102,241,0.4),0 4px 16px rgba(99,102,241,0.15);
  /* REPLACE WITH STRIPE LINK */
}
.btn-pricing:hover{background:var(--accent-h);transform:translateY(-1px);box-shadow:0 0 0 1px rgba(99,102,241,0.5),0 8px 20px rgba(99,102,241,0.25)}
.price-sec{font-size:12px;color:var(--text-3);display:flex;align-items:center;justify-content:center;gap:5px}


/* ── VALUE PROP ── */
.vp-section{padding:96px 40px;border-top:1px solid var(--border)}
.vp-inner{max-width:1040px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:80px;align-items:start}
.vp-title{font-size:clamp(26px,3.5vw,38px);font-weight:700;line-height:1.2;letter-spacing:-0.5px;margin-bottom:24px}
.vp-body{font-size:15px;color:var(--text-2);line-height:1.75;margin-bottom:16px}
.vp-body:last-child{margin-bottom:0}
.vp-right{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:var(--border);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.vp-stat{padding:28px 24px;background:var(--surface)}
.vp-stat:hover{background:var(--surface-2)}
.vp-stat-num{font-size:36px;font-weight:700;letter-spacing:-1px;color:var(--text);margin-bottom:6px}
.vp-stat-label{font-size:13px;color:var(--text-3);line-height:1.4}
@media(max-width:768px){
  .vp-inner{grid-template-columns:1fr;gap:40px}
  .vp-section{padding:72px 20px}
}

/* ── FOOTER ── */
footer{border-top:1px solid var(--border);padding:22px 40px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
footer span{font-size:13px;color:var(--text-3)}
.footer-links{display:flex;gap:20px}
.footer-links a{font-size:13px;color:var(--text-3);transition:color 0.15s}
.footer-links a:hover{color:var(--text-2)}

/* ── UPLOAD PAGE ── */
.upload-wrap{width:100%;max-width:540px}
.upload-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:36px;box-shadow:var(--shadow)}
.upload-title{font-size:22px;font-weight:700;letter-spacing:-0.3px;margin-bottom:5px}
.upload-sub{font-size:14px;color:var(--text-3);margin-bottom:24px}
.dropzone{
  border:2px dashed var(--border-light);border-radius:var(--r);padding:44px 20px;
  text-align:center;cursor:pointer;transition:var(--tr);position:relative;
}
.dropzone:hover,.dropzone.over{border-color:var(--accent);background:rgba(99,102,241,0.05)}
.dropzone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.drop-icon{
  width:44px;height:44px;margin:0 auto 14px;border-radius:11px;
  background:var(--surface-2);border:1px solid var(--border-light);
  display:flex;align-items:center;justify-content:center;color:var(--text-2);
}
.dropzone h3{font-size:15px;font-weight:600;margin-bottom:5px}
.dropzone p{font-size:13px;color:var(--text-3)}
#file-chosen{font-size:13px;color:var(--accent);margin-top:10px;display:none}

.field-row{margin-top:14px}
.field-row label{display:block;font-size:12px;font-weight:600;color:var(--text-3);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:6px}
.field-row select{
  width:100%;padding:10px 12px;background:var(--surface-2);border:1px solid var(--border-light);
  border-radius:var(--r3);color:var(--text);font-size:14px;appearance:none;cursor:pointer;transition:var(--tr);
}
.field-row select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(99,102,241,0.1)}

.btn-analyze{
  width:100%;margin-top:18px;padding:13px;
  background:var(--accent);color:#fff;border-radius:var(--r2);
  font-size:15px;font-weight:600;transition:var(--tr);
  display:flex;align-items:center;justify-content:center;gap:8px;
}
.btn-analyze:hover:not(:disabled){background:var(--accent-h);transform:translateY(-1px);box-shadow:0 4px 16px rgba(99,102,241,0.3)}
.btn-analyze:disabled{opacity:0.35;cursor:not-allowed;transform:none}
.upload-foot{text-align:center;margin-top:14px;display:flex;align-items:center;justify-content:center;gap:10px}
.upload-foot button{font-size:13px;color:var(--text-3);transition:color 0.15s}
.upload-foot button:hover{color:var(--text-2)}
.sep{font-size:13px;color:var(--border-light)}

/* ── PROGRESS ── */
.progress-card{display:none;background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:36px;box-shadow:var(--shadow)}
.progress-card.show{display:block}
.prog-title{font-size:22px;font-weight:700;letter-spacing:-0.3px;margin-bottom:5px}
.prog-sub{font-size:14px;color:var(--text-3);margin-bottom:28px}
.stages{display:flex;flex-direction:column;gap:14px;margin-bottom:24px}
.stage{display:flex;align-items:center;gap:12px}
.s-ind{
  width:28px;height:28px;border-radius:50%;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:700;transition:var(--tr);
}
.s-ind.pending{background:var(--surface-2);border:1px solid var(--border-light);color:var(--text-3)}
.s-ind.active{background:var(--accent);border:1px solid var(--accent);color:#fff}
.s-ind.done{background:var(--accent);border:1px solid var(--accent);color:#fff}
.s-info{flex:1}
.s-lbl{font-size:14px;font-weight:500;margin-bottom:5px;transition:color 0.2s}
.s-lbl.dim{color:var(--text-3)}
.s-track{height:4px;background:var(--border-light);border-radius:2px;overflow:hidden}
.s-fill{height:100%;border-radius:2px;background:var(--accent);width:0%;transition:width 0.5s ease;position:relative}
.s-fill.shimmer::after{
  content:'';position:absolute;inset:0;
  background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,0.3) 50%,transparent 100%);
  animation:shim 1.4s infinite;
}
@keyframes shim{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
.prog-eta{font-size:13px;color:var(--text-3);text-align:center}

/* ── REPORT PAGE ── */
.report-nav{
  display:flex;align-items:center;justify-content:space-between;
  padding:0 40px;height:64px;border-bottom:1px solid var(--border);
  background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;
}
.report-logo{font-size:16px;font-weight:600;display:flex;align-items:center;gap:8px}
.btn-dl{
  padding:8px 14px;border-radius:var(--r2);font-size:13px;font-weight:500;color:var(--text-2);
  border:1px solid var(--border-light);display:flex;align-items:center;gap:6px;transition:var(--tr);
}
.btn-dl:hover{color:var(--text);background:var(--surface-2)}

.report-body{max-width:680px;margin:0 auto;padding:48px 40px 96px}

.score-hero{text-align:center;padding:48px 0 36px;border-bottom:1px solid var(--border);margin-bottom:36px}
.score-eyebrow{font-size:11px;font-weight:600;color:var(--text-3);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:14px}
.score-num{font-size:80px;font-weight:700;line-height:1;letter-spacing:-3px;margin-bottom:6px}
.score-denom{font-size:32px;color:var(--text-3);font-weight:400}
.score-verdict{font-size:16px;color:var(--text-2);margin-top:10px}
.score-tier{
  display:inline-flex;align-items:center;gap:6px;margin-top:14px;
  padding:6px 14px;border-radius:100px;font-size:13px;font-weight:600;
}

.rep-section{margin-bottom:36px}
.rep-section-title{
  font-size:11px;font-weight:700;color:var(--text-3);text-transform:uppercase;letter-spacing:1.5px;
  margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid var(--border);
}

.rep-flag{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r);
  padding:18px 20px;margin-bottom:10px;display:flex;gap:14px;align-items:flex-start;
  position:relative;transition:var(--tr);
}
.rep-flag::before{content:'';position:absolute;left:0;top:10px;bottom:10px;width:3px;border-radius:0 2px 2px 0}
.rep-flag.high::before{background:var(--danger)}
.rep-flag.medium::before{background:var(--warning)}
.rep-flag.low::before{background:var(--success)}
.rep-flag:hover{border-color:var(--border-light)}
.rep-badge{flex-shrink:0;padding:3px 9px;border-radius:100px;font-size:10px;font-weight:700;letter-spacing:0.4px}
.rep-badge.high{background:var(--danger-bg);color:var(--danger);border:1px solid rgba(239,68,68,0.2)}
.rep-badge.medium{background:var(--warning-bg);color:var(--warning);border:1px solid rgba(245,158,11,0.2)}
.rep-badge.low{background:var(--success-bg);color:var(--success);border:1px solid rgba(16,185,129,0.2)}
.rep-flag-body{}
.rep-clause{font-size:14px;font-weight:600;margin-bottom:5px}
.rep-text{font-size:13px;color:var(--text-2);line-height:1.65;margin-bottom:7px}
.rep-cite{font-size:11px;font-style:italic;color:var(--accent);background:var(--accent-glow);border:1px solid rgba(99,102,241,0.15);padding:5px 9px;border-radius:5px;display:inline-block;margin-bottom:7px}
.rep-action{font-size:13px;color:var(--text-2);padding-top:7px;border-top:1px solid var(--border)}
.rep-action strong{color:var(--text)}

/* ── PAYWALL ── */
.paywall-wrap{position:relative}
.pw-blur{filter:blur(5px);pointer-events:none;user-select:none;opacity:0.3}
.pw-overlay{
  position:absolute;inset:0;
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;
  background:linear-gradient(180deg,rgba(250,250,248,0) 0%,rgba(250,250,248,0.97) 35%);
  padding:32px 40px;
}
.pw-icon{
  width:44px;height:44px;border-radius:13px;
  background:var(--surface-2);border:1px solid var(--border-light);
  display:flex;align-items:center;justify-content:center;color:var(--accent);
}
.pw-title{font-size:22px;font-weight:700;text-align:center;letter-spacing:-0.3px}
.pw-sub{font-size:14px;color:var(--text-2);text-align:center;max-width:360px;line-height:1.6}
.btn-pw{
  padding:13px 32px;border-radius:var(--r2);background:var(--accent);color:#fff;
  font-size:15px;font-weight:600;transition:var(--tr);
  box-shadow:0 0 0 1px rgba(99,102,241,0.4),0 4px 16px rgba(99,102,241,0.2);
  /* REPLACE WITH STRIPE LINK */
}
.btn-pw:hover{background:var(--accent-h);transform:translateY(-1px)}
.pw-note{font-size:12px;color:var(--text-3);display:flex;align-items:center;gap:5px}

/* ── SPINNER ── */
.spin{width:15px;height:15px;border-radius:50%;border:2px solid rgba(255,255,255,0.25);border-top-color:#fff;animation:spinr 0.65s linear infinite;display:none}
@keyframes spinr{to{transform:rotate(360deg)}}

/* ── RESPONSIVE ── */
@media(max-width:768px){
  nav{padding:0 20px}
  .btn-ghost{display:none}
  .hero{padding:120px 20px 72px}
  .hero-ctas{flex-direction:column}
  .trust-sigs{gap:14px}
  .section{padding:72px 20px}
  .steps{grid-template-columns:1fr;border-radius:var(--r)}
  .preview-section{padding:72px 20px}
  .pricing-section{padding:72px 20px}
  footer{padding:20px;flex-direction:column;align-items:flex-start}
  .trust-bar{padding:16px 20px;flex-direction:column;gap:14px;text-align:center}
  .tb-unis{justify-content:center}
  .report-body{padding:32px 20px 72px}
  .report-nav{padding:0 20px}
}
</style>
</head>
<body>

<!-- ══════════════════════════ PAGE 1: LANDING ══════════════════════════ -->
<div id="page-landing" class="page active">

<nav id="nav">
  <div class="logo" onclick="showPage('landing')">
    <div class="logo-mark">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
        <circle cx="6" cy="6" r="4" stroke="white" stroke-width="1.5"/>
        <line x1="9.2" y1="9.2" x2="12.5" y2="12.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </div>
    LeaseLens
  </div>
  <div class="nav-r">
    <button class="btn-ghost" onclick="document.getElementById('hiw').scrollIntoView({behavior:'smooth'})">How it works</button>
    <button class="btn-nav" onclick="showPage('upload')">Analyze My Lease</button>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="eyebrow"><span class="dot"></span> AI Residential Lease Expert</div>
  <h1>Sign with confidence.</h1>
  <p class="hero-sub">Your landlord's lease was written by an attorney. LeaseLens gives you the same analytical depth — surfacing legal risk, hidden fees, and unfair clauses before you commit.</p>
  <div class="hero-ctas">
    <button class="btn-hero" onclick="showPage('upload')">Analyze My Lease →</button>
    <button class="btn-hero-ghost" onclick="loadDemo()">See a sample report</button>
  </div>
  <div class="trust-sigs">
    <div class="tsig">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      256-bit encrypted upload
    </div>
    <div class="tsig">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Attorney-grade analysis
    </div>
    <div class="tsig">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      AI Residential Lease Expert
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="section" id="hiw">
  <div class="hiw-header">
    <div class="sec-label">How It Works</div>
    <h2 class="sec-title">The analysis your landlord's<br>attorney already ran on you.</h2>
    <p class="sec-sub">Lease agreements are written by lawyers, for landlords. LeaseLens levels the information asymmetry.</p>
  </div>
  <div class="steps">
    <div class="step">
      <div class="step-meta">
        <span class="step-n">01</span>
        <div class="step-tag">Upload</div>
      </div>
      <h3>Submit your lease document</h3>
      <p>Upload any residential lease in PDF format. LeaseLens accepts fixed-term agreements, month-to-month contracts, furnished rentals, and subleases — no account required.</p>
      <div class="step-detail">PDF · Up to 20MB · 256-bit encrypted in transit</div>
    </div>
    <div class="step">
      <div class="step-meta">
        <span class="step-n">02</span>
        <div class="step-tag">Analysis</div>
      </div>
      <h3>Every clause. Every statute.</h3>
      <p>A dual-model AI pipeline extracts 50+ data fields and cross-references each clause against your state's residential tenancy law — flagging non-compliant terms, escalating fee structures, and provisions that create outsized financial exposure.</p>
      <div class="step-detail">VA § 55.1-1229 · CA Civil § 1954 · NY RPL § 235-b · TX Prop § 92.0081</div>
    </div>
    <div class="step">
      <div class="step-meta">
        <span class="step-n">03</span>
        <div class="step-tag">Report</div>
      </div>
      <h3>Negotiate from a position of knowledge</h3>
      <p>A severity-ranked risk report with statute citations, exact negotiation language to send your landlord, and a PDF to share with parents or co-signers. Know your exposure before you put pen to paper.</p>
      <div class="step-detail">Risk score · Clause flags · Negotiation scripts · PDF report</div>
    </div>
  </div>
</section>

<!-- PREVIEW -->
<section class="preview-section">
  <div style="text-align:center;margin-bottom:44px">
    <div class="sec-label">Sample Output</div>
    <h2 class="sec-title">Precision at the clause level.</h2>
    <p class="sec-sub">Real output from a real Lexington, VA student lease. Risk score, severity ranking, and statute citations included.</p>
  </div>
  <div class="preview-inner">
    <div class="risk-card">
      <div class="risk-hdr">
        <div>
          <div class="risk-lbl">Risk Score</div>
          <div class="risk-num">72<span class="risk-denom">/100</span></div>
        </div>
        <div class="risk-badge">● HIGH RISK</div>
      </div>
      <div class="flag-list">
        <div class="flag-row">
          <div class="flag-dot h"></div>
          <div class="flag-info">
            <div class="flag-name">Entry Notice Unspecified</div>
            <div class="flag-desc">No hours defined — VA law requires 24 hrs minimum (§ 55.1-1229)</div>
          </div>
          <div class="flag-pill h">CRITICAL</div>
        </div>
        <div class="flag-row">
          <div class="flag-dot m"></div>
          <div class="flag-info">
            <div class="flag-name">Escalating Late Fees</div>
            <div class="flag-desc">10% → 15% escalation, possession demand on day 25</div>
          </div>
          <div class="flag-pill m">HIGH</div>
        </div>
        <div class="flag-row">
          <div class="flag-dot l"></div>
          <div class="flag-info">
            <div class="flag-name">Parental Guarantee</div>
            <div class="flag-desc">Parents are primary obligors — landlord can sue them first</div>
          </div>
          <div class="flag-pill l">MEDIUM</div>
        </div>
        <div class="flag-locked">
          <div class="flag-locked-blur">
            <div class="flag-row" style="border:none;padding:0">
              <div class="flag-dot h"></div>
              <div class="flag-info"><div class="flag-name">Hidden clause</div><div class="flag-desc">Locked</div></div>
              <div class="flag-pill h">HIGH</div>
            </div>
          </div>
          <div class="flag-locked-overlay">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="var(--accent)"><path d="M9 5H8.5V3.5a2.5 2.5 0 00-5 0V5H3a1 1 0 00-1 1v4a1 1 0 001 1h6a1 1 0 001-1V6a1 1 0 00-1-1zm-3 3a.75.75 0 110-1.5.75.75 0 010 1.5zm1.5-3h-3V3.5a1.5 1.5 0 013 0V5z"/></svg>
            4 more flags · unlock full report
          </div>
        </div>
      </div>
      <div class="card-cta">
        <button class="btn-unlock" onclick="showPage('upload')">Unlock Full Analysis — $9.99</button>
        <!-- REPLACE WITH STRIPE LINK -->
        <div class="cta-note">
          <svg width="10" height="10" viewBox="0 0 10 10" fill="currentColor"><path d="M5 0a5 5 0 100 10A5 5 0 005 0zm.5 7.5h-1V4.5h1V7.5zm0-4h-1v-1h1v1z"/></svg>
          Secured by Stripe · Document deleted after analysis
        </div>
      </div>
    </div>
  </div>
</section>


<!-- VALUE PROP SECTION -->
<section class="vp-section">
  <div class="vp-inner">
    <div class="vp-left">
      <div class="sec-label" style="text-align:left;margin-bottom:16px">Why It Matters</div>
      <h2 class="vp-title">The information asymmetry<br>in every lease negotiation.</h2>
      <p class="vp-body">Landlords and property managers use standardized lease templates drafted by real estate attorneys — optimized to protect their interests, minimize their liability, and maximize their recourse against tenants.</p>
      <p class="vp-body">Most renters sign without reading every clause. Those who do read often lack the legal context to recognize what's unusual, non-compliant, or financially dangerous.</p>
      <p class="vp-body">LeaseLens closes that gap. In 60 seconds, you'll know exactly where you're exposed — and exactly what to ask for.</p>
    </div>
    <div class="vp-right">
      <div class="vp-stat">
        <div class="vp-stat-num">50+</div>
        <div class="vp-stat-label">Clauses reviewed per lease</div>
      </div>
      <div class="vp-stat">
        <div class="vp-stat-num">5</div>
        <div class="vp-stat-label">State tenancy statutes cross-referenced</div>
      </div>
      <div class="vp-stat">
        <div class="vp-stat-num">60s</div>
        <div class="vp-stat-label">Average analysis time</div>
      </div>
      <div class="vp-stat">
        <div class="vp-stat-num">$9.99</div>
        <div class="vp-stat-label">Flat fee — no subscription</div>
      </div>
    </div>
  </div>
</section>

<!-- PRICING -->
<section class="pricing-section">
  <div class="sec-label">Pricing</div>
  <h2 class="sec-title" style="margin-bottom:8px">One report. One price.</h2>
  <p class="sec-sub" style="margin-bottom:36px">Less than 10 minutes with an attorney.<br>More thorough than most consultations.</p>
  <div class="pricing-card">
    <div class="price-big">$9.99</div>
    <div class="price-per">one-time · no subscription</div>
    <ul class="price-list">
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>0–100 risk score with severity breakdown</li>
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>50+ clauses reviewed against state law</li>
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Exact negotiation language to send your landlord</li>
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Statute citations — VA, CA, NY, TX, FL</li>
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Shareable PDF for parents or co-signers</li>
      <li><svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5l3 3 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Walk-away triggers — when to refuse to sign</li>
    </ul>
    <button class="btn-pricing" onclick="showPage('upload')">Analyze My Lease — $9.99</button>
    <!-- REPLACE WITH STRIPE LINK -->
    <div class="price-sec">
      <svg width="11" height="11" viewBox="0 0 11 11" fill="currentColor"><path d="M5.5 0L1 2.5V5.5C1 8.3 3 10.9 5.5 11.5 8 10.9 10 8.3 10 5.5V2.5L5.5 0zm-.5 8L3 6l.8-.8L5 6.35l2.2-2.15.8.8L5 8z"/></svg>
      Secured by Stripe · Document permanently deleted after analysis
    </div>
  </div>
</section>

<footer>
  <span>© 2026 LeaseLens</span>
  <div class="footer-links">
    <a href="#">Privacy Policy</a>
    <a href="#">Terms of Service</a>
  </div>
</footer>

</div><!-- /page-landing -->


<!-- ══════════════════════════ PAGE 2: UPLOAD ══════════════════════════ -->
<div id="page-upload" class="page">
  <div class="upload-wrap">

    <!-- Upload Card -->
    <div class="upload-card" id="upload-card">
      <div style="display:flex;align-items:center;gap:9px;margin-bottom:22px">
        <div class="logo-mark" style="width:30px;height:30px">
          <svg width="13" height="13" viewBox="0 0 14 14" fill="none"><circle cx="6" cy="6" r="4" stroke="white" stroke-width="1.5"/><line x1="9.2" y1="9.2" x2="12.5" y2="12.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/></svg>
        </div>
        <span style="font-weight:600;font-size:15px">LeaseLens</span>
      </div>

      <div class="upload-title">Upload your lease</div>
      <div class="upload-sub">PDF only · Max 20MB · Encrypted in transit</div>

      <div class="dropzone" id="dropzone">
        <input type="file" id="file-input" accept=".pdf">
        <div class="drop-icon">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M4 13v2a2 2 0 002 2h8a2 2 0 002-2v-2M13 7l-3-3m0 0L7 7m3-3v9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <h3>Drag and drop your lease</h3>
        <p>or click to browse</p>
      </div>
      <div id="file-chosen"></div>

      <div class="field-row">
        <label>Property State</label>
        <select id="state-sel">
          <option value="VA">Virginia</option>
          <option value="CA">California</option>
          <option value="NY">New York</option>
          <option value="TX">Texas</option>
          <option value="FL">Florida</option>
          <option value="WA">Washington</option>
          <option value="IL">Illinois</option>
          <option value="GA">Georgia</option>
          <option value="CO">Colorado</option>
          <option value="MA">Massachusetts</option>
          <option value="NC">North Carolina</option>
          <option value="MD">Maryland</option>
          <option value="NJ">New Jersey</option>
          <option value="DC">Washington DC</option>
          <option value="OTHER">Other</option>
        </select>
      </div>

      <button class="btn-analyze" id="analyze-btn" disabled onclick="startAnalysis()">
        <div class="spin" id="spinner"></div>
        <span id="btn-text">Select a file to continue</span>
      </button>

      <div class="upload-foot">
        <button onclick="showPage('landing')">← Back</button>
        <span class="sep">·</span>
        <button onclick="loadDemo()" style="color:var(--accent)">View sample report</button>
      </div>
    </div>

    <!-- Progress Card -->
    <div class="progress-card" id="progress-card">
      <div style="display:flex;align-items:center;gap:9px;margin-bottom:22px">
        <div class="logo-mark" style="width:30px;height:30px">
          <svg width="13" height="13" viewBox="0 0 14 14" fill="none"><circle cx="6" cy="6" r="4" stroke="white" stroke-width="1.5"/><line x1="9.2" y1="9.2" x2="12.5" y2="12.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/></svg>
        </div>
        <span style="font-weight:600;font-size:15px">LeaseLens</span>
      </div>
      <div class="prog-title">Analyzing your lease</div>
      <div class="prog-sub">This usually takes 45–60 seconds</div>

      <div class="stages">
        <div class="stage">
          <div class="s-ind pending" id="s0">1</div>
          <div class="s-info">
            <div class="s-lbl dim" id="s0l">Extracting document data</div>
            <div class="s-track"><div class="s-fill" id="s0b"></div></div>
          </div>
        </div>
        <div class="stage">
          <div class="s-ind pending" id="s1">2</div>
          <div class="s-info">
            <div class="s-lbl dim" id="s1l">Reviewing clauses against state law</div>
            <div class="s-track"><div class="s-fill" id="s1b"></div></div>
          </div>
        </div>
        <div class="stage">
          <div class="s-ind pending" id="s2">3</div>
          <div class="s-info">
            <div class="s-lbl dim" id="s2l">Generating your risk report</div>
            <div class="s-track"><div class="s-fill" id="s2b"></div></div>
          </div>
        </div>
      </div>

      <div class="prog-eta" id="eta">Estimated time: 45–60 seconds</div>
    </div>

  </div>
</div><!-- /page-upload -->


<!-- ══════════════════════════ PAGE 3: REPORT ══════════════════════════ -->
<div id="page-report" class="page">

  <div class="report-nav">
    <div class="report-logo">
      <div class="logo-mark" style="width:26px;height:26px">
        <svg width="12" height="12" viewBox="0 0 14 14" fill="none"><circle cx="6" cy="6" r="4" stroke="white" stroke-width="1.5"/><line x1="9.2" y1="9.2" x2="12.5" y2="12.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/></svg>
      </div>
      LeaseLens Report
    </div>
    <button class="btn-dl" id="dl-btn" onclick="downloadPDF()" style="display:none">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M6 1v7M3.5 5.5l2.5 2.5 2.5-2.5M1.5 9.5v1a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-1" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Download PDF
    </button>
  </div>

  <div class="report-body">

    <!-- Score -->
    <div class="score-hero">
      <div class="score-eyebrow">Lease Risk Assessment</div>
      <div class="score-num" id="r-score">—</div>
      <div class="score-verdict" id="r-verdict"></div>
      <div class="score-tier" id="r-tier"></div>
    </div>

    <!-- Free flags -->
    <div class="rep-section">
      <div class="rep-section-title">Risk Flags — Preview</div>
      <div id="free-flags"></div>
    </div>

    <!-- Paywall -->
    <div class="rep-section paywall-wrap">
      <div class="rep-section-title">Full Clause Analysis</div>
      <div class="pw-blur">
        <div class="rep-flag high" style="margin-bottom:10px">
          <div class="rep-badge high">CRITICAL</div>
          <div class="rep-flag-body">
            <div class="rep-clause">████████████████████████████</div>
            <div class="rep-text">███████████████████████████████████████████████████████████████████████████</div>
          </div>
        </div>
        <div class="rep-flag medium" style="margin-bottom:10px">
          <div class="rep-badge medium">HIGH</div>
          <div class="rep-flag-body">
            <div class="rep-clause">████████████████████</div>
            <div class="rep-text">██████████████████████████████████████████████████████████</div>
          </div>
        </div>
        <div class="rep-flag low">
          <div class="rep-badge low">MEDIUM</div>
          <div class="rep-flag-body">
            <div class="rep-clause">████████████████████████</div>
            <div class="rep-text">██████████████████████████████████████████████</div>
          </div>
        </div>
      </div>
      <div class="pw-overlay">
        <div class="pw-icon">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor"><path d="M13.5 7.5H12.75V5.25a3.75 3.75 0 00-7.5 0V7.5H4.5A1.5 1.5 0 003 9v6a1.5 1.5 0 001.5 1.5h9A1.5 1.5 0 0015 15V9a1.5 1.5 0 00-1.5-1.5zm-4.5 5.25a1.5 1.5 0 110-3 1.5 1.5 0 010 3zM11.25 7.5H6.75V5.25a2.25 2.25 0 014.5 0V7.5z"/></svg>
        </div>
        <div class="pw-title">Full analysis locked</div>
        <div class="pw-sub" id="pw-count">Unlock all remaining flags, negotiation scripts, financial summary, and downloadable PDF.</div>
        <button class="btn-pw" onclick="showPage('upload')">Unlock Full Report — $9.99</button>
        <!-- REPLACE WITH STRIPE LINK -->
        <div class="pw-note">
          <svg width="10" height="10" viewBox="0 0 10 10" fill="currentColor"><path d="M5 0a5 5 0 100 10A5 5 0 005 0zm.5 7.5h-1V4.5h1V7.5zm0-4h-1v-1h1v1z"/></svg>
          Secured by Stripe · Attorney-grade analysis
        </div>
      </div>
    </div>

  </div>
</div><!-- /page-report -->


<script>
// ── STATE ──
let pdfB64 = null;

// ── ROUTING ──
function showPage(name) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  window.scrollTo(0, 0);
}

// ── NAV SCROLL ──
window.addEventListener('scroll', () => {
  const n = document.getElementById('nav');
  if (n) n.classList.toggle('scrolled', window.scrollY > 20);
});

// ── FILE HANDLING ──
const fileInput = document.getElementById('file-input');
const dropzone  = document.getElementById('dropzone');
const analyzeBtn = document.getElementById('analyze-btn');
const btnText   = document.getElementById('btn-text');

fileInput?.addEventListener('change', e => { if (e.target.files[0]) setFile(e.target.files[0]); });
dropzone?.addEventListener('dragover', e => { e.preventDefault(); dropzone.classList.add('over'); });
dropzone?.addEventListener('dragleave', () => dropzone.classList.remove('over'));
dropzone?.addEventListener('drop', e => {
  e.preventDefault(); dropzone.classList.remove('over');
  const f = e.dataTransfer.files[0];
  if (f?.name.endsWith('.pdf')) setFile(f);
});

function setFile(f) {
  window._file = f;
  const fc = document.getElementById('file-chosen');
  fc.textContent = '✓ ' + f.name;
  fc.style.display = 'block';
  analyzeBtn.disabled = false;
  btnText.textContent = 'Analyze "' + (f.name.length > 30 ? f.name.slice(0,30) + '…' : f.name) + '"';
}

// ── PROGRESS ──
function activateStage(i) {
  document.getElementById('s'+i).className = 's-ind active';
  document.getElementById('s'+i+'l').className = 's-lbl';
}
function completeStage(i) {
  const ind = document.getElementById('s'+i);
  ind.className = 's-ind done';
  ind.innerHTML = '<svg width="11" height="11" viewBox="0 0 11 11" fill="none"><path d="M1.5 5.5l3 3 5-5" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';
  const bar = document.getElementById('s'+i+'b');
  bar.classList.remove('shimmer');
  bar.style.width = '100%';
}
function animBar(i, to, ms) {
  const bar = document.getElementById('s'+i+'b');
  bar.classList.add('shimmer');
  const t0 = performance.now(), from = parseFloat(bar.style.width)||0;
  (function step(now) {
    const p = Math.min((now-t0)/ms, 1);
    bar.style.width = (from + (to-from)*(1-Math.pow(1-p,3))) + '%';
    if (p < 1) requestAnimationFrame(step);
  })(performance.now());
}

// ── ANALYSIS ──
async function startAnalysis() {
  const file = window._file;
  if (!file) return;

  analyzeBtn.disabled = true;
  document.getElementById('spinner').style.display = 'block';
  btnText.textContent = 'Analyzing…';
  document.getElementById('upload-card').style.display = 'none';
  document.getElementById('progress-card').classList.add('show');

  activateStage(0); animBar(0, 80, 3000);

  const fd = new FormData();
  fd.append('file', file);
  fd.append('state', document.getElementById('state-sel').value);
  fd.append('tier', 'paid');

  let data;
  try {
    const req = fetch('/analyze', { method:'POST', body:fd });

    await wait(3000); completeStage(0);
    activateStage(1); animBar(1, 80, 20000);
    document.getElementById('eta').textContent = 'Almost there — reviewing clauses…';

    await wait(20000); completeStage(1);
    activateStage(2); animBar(2, 80, 10000);
    document.getElementById('eta').textContent = 'Finalizing your report…';

    const res = await req;
    if (!res.ok) {
      const e = await res.json().catch(()=>({}));
      throw new Error(e.error || 'Analysis failed — please try again');
    }
    data = await res.json();
    completeStage(2);
    document.getElementById('eta').textContent = 'Done!';
    await wait(500);
  } catch(err) {
    document.getElementById('progress-card').classList.remove('show');
    document.getElementById('upload-card').style.display = 'block';
    analyzeBtn.disabled = false;
    document.getElementById('spinner').style.display = 'none';
    btnText.textContent = '⚠ ' + err.message;
    return;
  }

  pdfB64 = data.pdf_base64;
  renderReport(data);
  showPage('report');
}

function wait(ms) { return new Promise(r => setTimeout(r, ms)); }

// ── RENDER REPORT ──
function riskColor(s) {
  if (s < 40) return 'var(--success)';
  if (s <= 70) return 'var(--warning)';
  return 'var(--danger)';
}

function renderReport(data) {
  const l4 = data.layer4 || {};
  const flags = data.layer3_flags || [];
  const score = l4.overall_lease_risk_score ?? '—';
  const tier  = l4.risk_tier || 'YELLOW';

  const scoreEl = document.getElementById('r-score');
  scoreEl.innerHTML = score + '<span class="score-denom">/100</span>';
  scoreEl.style.color = riskColor(Number(score));

  document.getElementById('r-verdict').textContent = l4.tenant_summary_biggest_risk || '';

  const tColors = {GREEN:'var(--success)',YELLOW:'var(--warning)',ORANGE:'#F97316',RED:'var(--danger)'};
  const tBgs    = {GREEN:'var(--success-bg)',YELLOW:'var(--warning-bg)',ORANGE:'rgba(249,115,22,0.1)',RED:'var(--danger-bg)'};
  const tLabels = {GREEN:'✓ Favorable',YELLOW:'⚠ Review Recommended',ORANGE:'! Negotiate Before Signing',RED:'✕ Serious Concerns'};
  const tb = document.getElementById('r-tier');
  tb.textContent = tLabels[tier] || tier;
  tb.style.background = tBgs[tier] || tBgs.YELLOW;
  tb.style.color = tColors[tier] || tColors.YELLOW;
  tb.style.border = '1px solid ' + (tColors[tier]||tColors.YELLOW) + '40';

  const sevMap = {CRITICAL:'high',HIGH:'high',MEDIUM:'medium',LOW:'low'};
  const free = flags.slice(0, 2);
  const ff = document.getElementById('free-flags');
  ff.innerHTML = free.length === 0
    ? '<p style="color:var(--text-3);font-size:14px">No significant flags identified.</p>'
    : free.map(f => {
        const s = sevMap[f.severity] || 'low';
        return `<div class="rep-flag ${s}">
          <div class="rep-badge ${s}">${f.severity}</div>
          <div class="rep-flag-body">
            <div class="rep-clause">${f.short_description||''}</div>
            <div class="rep-text">${f.detailed_explanation||''}</div>
            ${f.raw_clause_citation ? `<div class="rep-cite">"${f.raw_clause_citation.slice(0,110)}…"</div>` : ''}
            ${f.what_to_negotiate ? `<div class="rep-action"><strong>What to request:</strong> ${f.what_to_negotiate}</div>` : ''}
          </div>
        </div>`;
      }).join('');

  const rem = Math.max(0, flags.length - 2);
  if (rem > 0) document.getElementById('pw-count').textContent = `Unlock ${rem} more flag${rem>1?'s':''}, negotiation scripts, financial summary, and downloadable PDF.`;

  const dlBtn = document.getElementById('dl-btn');
  dlBtn.style.display = pdfB64 ? 'flex' : 'none';
}

// ── DEMO ──
function loadDemo() {
  fetch('/demo')
    .then(r => r.json())
    .then(d => { pdfB64 = null; renderReport(d); showPage('report'); })
    .catch(() => showPage('upload'));
}

// ── PDF DOWNLOAD ──
function downloadPDF() {
  if (!pdfB64) return;
  const a = document.createElement('a');
  a.href = 'data:application/pdf;base64,' + pdfB64;
  a.download = 'lease-analysis.pdf';
  a.click();
}
</script>
</body>
</html>
